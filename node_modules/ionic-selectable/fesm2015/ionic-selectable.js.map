{"version":3,"file":"ionic-selectable.js","sources":["../../src/app/components/ionic-selectable/ionic-selectable-add-item-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-close-button-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-footer-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-group-end-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-group-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-header-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-item-end-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-item-icon-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-item-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-message-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-modal.component.ts","../../src/app/components/ionic-selectable/ionic-selectable-placeholder-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-search-fail-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-title-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-value-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable-icon-template.directive.ts","../../src/app/components/ionic-selectable/ionic-selectable.component.ts","../../src/app/components/ionic-selectable/ionic-selectable.module.ts","../../ionic-selectable.ts"],"sourcesContent":["import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableAddItemTemplate]',\n})\nexport class IonicSelectableAddItemTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableCloseButtonTemplate]',\n})\nexport class IonicSelectableCloseButtonTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableFooterTemplate]',\n})\nexport class IonicSelectableFooterTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableGroupEndTemplate]',\n})\nexport class IonicSelectableGroupEndTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableGroupTemplate]',\n})\nexport class IonicSelectableGroupTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableHeaderTemplate]',\n})\nexport class IonicSelectableHeaderTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableItemEndTemplate]',\n})\nexport class IonicSelectableItemEndTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableItemIconTemplate]'\n})\nexport class IonicSelectableItemIconTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableItemTemplate]'\n})\nexport class IonicSelectableItemTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableMessageTemplate]',\n})\nexport class IonicSelectableMessageTemplateDirective { }\n","import { AfterViewInit, Component, ElementRef, HostBinding, HostListener, ViewChild } from '@angular/core';\nimport { IonContent, IonInfiniteScroll, IonSearchbar, NavParams } from '@ionic/angular';\nimport { IonicSelectableComponent } from './ionic-selectable.component';\n\n@Component({\n  selector: 'ionic-selectable-modal',\n  templateUrl: './ionic-selectable-modal.component.html'\n})\nexport class IonicSelectableModalComponent implements AfterViewInit {\n  @ViewChild(IonContent)\n  _content: IonContent;\n  _header: HTMLElement;\n  selectComponent: IonicSelectableComponent;\n  @ViewChild('searchbarComponent')\n  _searchbarComponent: IonSearchbar;\n  @ViewChild(IonInfiniteScroll)\n  _infiniteScroll: IonInfiniteScroll;\n  @HostBinding('class.ionic-selectable-modal')\n  _cssClass = true;\n  @HostBinding('class.ionic-selectable-modal-can-clear')\n  get _canClearCssClass(): boolean {\n    return this.selectComponent.canClear;\n  }\n  @HostBinding('class.ionic-selectable-modal-is-multiple')\n  get _isMultipleCssClass(): boolean {\n    return this.selectComponent.isMultiple;\n  }\n  @HostBinding('class.ionic-selectable-modal-is-searching')\n  get _isSearchingCssClass(): boolean {\n    return this.selectComponent._isSearching;\n  }\n  @HostBinding('class.ionic-selectable-modal-ios')\n  get _isIos(): boolean {\n    return this.selectComponent._isIos;\n  }\n  @HostBinding('class.ionic-selectable-modal-md')\n  _isMD(): boolean {\n    return this.selectComponent._isMD;\n  }\n  @HostBinding('class.ionic-selectable-modal-is-add-item-template-visible')\n  get _isAddItemTemplateVisibleCssClass(): boolean {\n    return this.selectComponent._isAddItemTemplateVisible;\n  }\n  @HostListener('window:resize')\n  onResize() {\n    // ion-footer inside the template might change its height when\n    // device orientation changes.\n    this.selectComponent._positionAddItemTemplate();\n  }\n\n  constructor(\n    private navParams: NavParams,\n    public _element: ElementRef,\n  ) {\n    this.selectComponent = this.navParams.get('selectComponent');\n    this.selectComponent._modalComponent = this;\n    this.selectComponent._selectedItems = [];\n\n    if (!this.selectComponent._isNullOrWhiteSpace(this.selectComponent.value)) {\n      if (this.selectComponent.isMultiple) {\n        this.selectComponent.value.forEach(item => {\n          this.selectComponent._selectedItems.push(item);\n        });\n      } else {\n        this.selectComponent._selectedItems.push(this.selectComponent.value);\n      }\n    }\n\n    this.selectComponent._setItemsToConfirm(this.selectComponent._selectedItems);\n  }\n\n  ngAfterViewInit() {\n    this._header = this._element.nativeElement.querySelector('ion-header');\n\n    if (this._searchbarComponent && this.selectComponent.shouldFocusSearchbar) {\n      // Focus after a delay because focus doesn't work without it.\n      setTimeout(() => {\n        this._searchbarComponent.setFocus();\n      }, 1000);\n    }\n  }\n}\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectablePlaceholderTemplate]',\n})\nexport class IonicSelectablePlaceholderTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableSearchFailTemplate]',\n})\nexport class IonicSelectableSearchFailTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableTitleTemplate]',\n})\nexport class IonicSelectableTitleTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableValueTemplate]',\n})\nexport class IonicSelectableValueTemplateDirective { }\n","import { Directive } from '@angular/core';\n\n@Directive({\n  selector: '[ionicSelectableIconTemplate]'\n})\nexport class IonicSelectableIconTemplateDirective { }\n","// tslint:disable-next-line:max-line-length\nimport { Component, ContentChild, DoCheck, ElementRef, EventEmitter, forwardRef, HostBinding, Input, IterableDiffer, IterableDiffers, OnInit, Optional, Output, Renderer2, TemplateRef, ViewEncapsulation } from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { IonItem, ModalController, Platform } from '@ionic/angular';\nimport { AnimationBuilder, ModalOptions } from '@ionic/core';\nimport { Subscription } from 'rxjs';\nimport { IonicSelectableAddItemTemplateDirective } from './ionic-selectable-add-item-template.directive';\nimport { IonicSelectableCloseButtonTemplateDirective } from './ionic-selectable-close-button-template.directive';\nimport { IonicSelectableFooterTemplateDirective } from './ionic-selectable-footer-template.directive';\nimport { IonicSelectableGroupEndTemplateDirective } from './ionic-selectable-group-end-template.directive';\nimport { IonicSelectableGroupTemplateDirective } from './ionic-selectable-group-template.directive';\nimport { IonicSelectableHeaderTemplateDirective } from './ionic-selectable-header-template.directive';\nimport { IonicSelectableItemEndTemplateDirective } from './ionic-selectable-item-end-template.directive';\nimport { IonicSelectableItemIconTemplateDirective } from './ionic-selectable-item-icon-template.directive';\nimport { IonicSelectableItemTemplateDirective } from './ionic-selectable-item-template.directive';\nimport { IonicSelectableMessageTemplateDirective } from './ionic-selectable-message-template.directive';\nimport { IonicSelectableModalComponent } from './ionic-selectable-modal.component';\nimport { IonicSelectablePlaceholderTemplateDirective } from './ionic-selectable-placeholder-template.directive';\nimport { IonicSelectableSearchFailTemplateDirective } from './ionic-selectable-search-fail-template.directive';\nimport { IonicSelectableTitleTemplateDirective } from './ionic-selectable-title-template.directive';\nimport { IonicSelectableValueTemplateDirective } from './ionic-selectable-value-template.directive';\nimport { IonicSelectableIconTemplateDirective } from './ionic-selectable-icon-template.directive';\n\n@Component({\n  selector: 'ionic-selectable',\n  templateUrl: './ionic-selectable.component.html',\n  styleUrls: ['./ionic-selectable.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  providers: [{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => IonicSelectableComponent),\n    multi: true\n  }]\n})\nexport class IonicSelectableComponent implements ControlValueAccessor, OnInit, DoCheck {\n  @HostBinding('class.ionic-selectable')\n  _cssClass = true;\n  @HostBinding('class.ionic-selectable-ios')\n  _isIos: boolean;\n  @HostBinding('class.ionic-selectable-md')\n  _isMD: boolean;\n  @HostBinding('class.ionic-selectable-is-multiple')\n  get _isMultipleCssClass(): boolean {\n    return this.isMultiple;\n  }\n  @HostBinding('class.ionic-selectable-has-value')\n  get _hasValueCssClass(): boolean {\n    return this.hasValue();\n  }\n  @HostBinding('class.ionic-selectable-has-placeholder')\n  get _hasPlaceholderCssClass(): boolean {\n    return this._hasPlaceholder;\n  }\n  @HostBinding('class.ionic-selectable-has-label')\n  get _hasIonLabelCssClass(): boolean {\n    return this._hasIonLabel;\n  }\n  @HostBinding('class.ionic-selectable-label-default')\n  get _hasDefaultIonLabelCssClass(): boolean {\n    return this._ionLabelPosition === 'default';\n  }\n  @HostBinding('class.ionic-selectable-label-fixed')\n  get _hasFixedIonLabelCssClass(): boolean {\n    return this._ionLabelPosition === 'fixed';\n  }\n  @HostBinding('class.ionic-selectable-label-stacked')\n  get _hasStackedIonLabelCssClass(): boolean {\n    return this._ionLabelPosition === 'stacked';\n  }\n  @HostBinding('class.ionic-selectable-label-floating')\n  get _hasFloatingIonLabelCssClass(): boolean {\n    return this._ionLabelPosition === 'floating';\n  }\n  private _isOnSearchEnabled = true;\n  private _isEnabled = true;\n  private _shouldBackdropClose = true;\n  private _isOpened = false;\n  private _value: any = null;\n  private _modal: HTMLIonModalElement;\n  private _itemsDiffer: IterableDiffer<any>;\n  private _hasObjects: boolean;\n  private _canClear = false;\n  private _hasConfirmButton = false;\n  private _isMultiple = false;\n  private _canAddItem = false;\n  private _addItemObservable: Subscription;\n  private _deleteItemObservable: Subscription;\n  private onItemsChange: EventEmitter<any> = new EventEmitter();\n  private _ionItemElement: any;\n  private _ionLabelElement: any;\n  private _hasIonLabel = false;\n  private _ionLabelPosition: 'fixed' | 'stacked' | 'floating' | 'default' | null = null;\n  private _label: string = null;\n  private get _hasInfiniteScroll(): boolean {\n    return this.isEnabled && this._modalComponent &&\n      this._modalComponent._infiniteScroll ? true : false;\n  }\n  get _shouldStoreItemValue(): boolean {\n    return this.shouldStoreItemValue && this._hasObjects;\n  }\n  _valueItems: any[] = [];\n  _searchText = '';\n  _hasSearchText = false;\n  _groups: any[] = [];\n  _itemsToConfirm: any[] = [];\n  _selectedItems: any[] = [];\n  _modalComponent: IonicSelectableModalComponent;\n  _filteredGroups: any[] = [];\n  _hasGroups: boolean;\n  _isSearching: boolean;\n  _hasPlaceholder: boolean;\n  _isAddItemTemplateVisible = false;\n  _isFooterVisible = true;\n  _itemToAdd: any = null;\n  _footerButtonsCount = 0;\n  _hasFilteredItems = false;\n\n  /**\n   * Text of [Ionic Label](https://ionicframework.com/docs/api/label).\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#label).\n   *\n   * @readonly\n   * @default null\n   * @memberof IonicSelectableComponent\n   */\n  get label(): string {\n    return this._label;\n  }\n\n  /**\n   * Text that the user has typed in Searchbar.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#searchtext).\n   *\n   * @readonly\n   * @default ''\n   * @memberof IonicSelectableComponent\n   */\n  get searchText(): string {\n    return this._searchText;\n  }\n  set searchText(searchText: string) {\n    this._searchText = searchText;\n    this._setHasSearchText();\n  }\n\n  /**\n   * Determines whether search is running.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#issearching).\n   *\n   * @default false\n   * @readonly\n   * @memberof IonicSelectableComponent\n   */\n  get isSearching(): boolean {\n    return this._isSearching;\n  }\n\n  /**\n   * Determines whether user has typed anything in Searchbar.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#hassearchtext).\n   *\n   * @default false\n   * @readonly\n   * @memberof IonicSelectableComponent\n   */\n  get hasSearchText(): boolean {\n    return this._hasSearchText;\n  }\n\n  get value(): any {\n    return this._value;\n  }\n  set value(value: any) {\n    this._value = value;\n\n    // Set value items.\n    this._valueItems.splice(0, this._valueItems.length);\n\n    if (this.isMultiple) {\n      if (value && value.length) {\n        Array.prototype.push.apply(this._valueItems, value);\n      }\n    } else {\n      if (!this._isNullOrWhiteSpace(value)) {\n        this._valueItems.push(value);\n      }\n    }\n\n    this._setIonItemHasValue();\n    this._setHasPlaceholder();\n  }\n\n  /**\n   * A list of items.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#items).\n   *\n   * @default []\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  items: any[] = [];\n  @Output()\n  itemsChange: EventEmitter<any> = new EventEmitter();\n\n  /**\n   * Determines whether the component is enabled.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#isenabled).\n   *\n   * @default true\n   * @memberof IonicSelectableComponent\n   */\n  @HostBinding('class.ionic-selectable-is-enabled')\n  @Input('isEnabled')\n  get isEnabled(): boolean {\n    return this._isEnabled;\n  }\n  set isEnabled(isEnabled: boolean) {\n    this._isEnabled = !!isEnabled;\n    this.enableIonItem(this._isEnabled);\n  }\n\n  /**\n   * Determines whether Modal should be closed when backdrop is clicked.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#shouldbackdropclose).\n   *\n   * @default true\n   * @memberof IonicSelectableComponent\n   */\n  @Input('shouldBackdropClose')\n  get shouldBackdropClose(): boolean {\n    return this._shouldBackdropClose;\n  }\n  set shouldBackdropClose(shouldBackdropClose: boolean) {\n    this._shouldBackdropClose = !!shouldBackdropClose;\n  }\n\n  /**\n   * Modal CSS class.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#modalcssclass).\n   *\n   * @default null\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  modalCssClass: string = null;\n\n  /**\n   * Modal enter animation.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#modalenteranimation).\n   *\n   * @default null\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  modalEnterAnimation: AnimationBuilder = null;\n\n  /**\n   * Modal leave animation.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#modalleaveanimation).\n   *\n   * @default null\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  modalLeaveAnimation: AnimationBuilder = null;\n\n  /**\n   * Determines whether Modal is opened.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#isopened).\n   *\n   * @default false\n   * @readonly\n   * @memberof IonicSelectableComponent\n   */\n  get isOpened(): boolean {\n    return this._isOpened;\n  }\n\n  /**\n   * Determines whether Confirm button is enabled.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#isconfirmbuttonenabled).\n   *\n   * @default true\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  isConfirmButtonEnabled = true;\n\n  /**\n * Determines whether Confirm button is visible for single selection.\n * By default Confirm button is visible only for multiple selection.\n * **Note**: It is always true for multiple selection and cannot be changed.\n * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#hasconfirmbutton).\n *\n * @default true\n * @memberof IonicSelectableComponent\n */\n  @Input('hasConfirmButton')\n  get hasConfirmButton(): boolean {\n    return this._hasConfirmButton;\n  }\n  set hasConfirmButton(hasConfirmButton: boolean) {\n    this._hasConfirmButton = !!hasConfirmButton;\n    this._countFooterButtons();\n  }\n\n  /**\n   * Item property to use as a unique identifier, e.g, `'id'`.\n   * **Note**: `items` should be an object array.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#itemvaluefield).\n   *\n   * @default null\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  itemValueField: string = null;\n\n  /**\n   * Item property to display, e.g, `'name'`.\n   * **Note**: `items` should be an object array.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#itemtextfield).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  itemTextField: string = null;\n\n  /**\n   *\n   * Group property to use as a unique identifier to group items, e.g. `'country.id'`.\n   * **Note**: `items` should be an object array.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#groupvaluefield).\n   *\n   * @default null\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  groupValueField: string = null;\n\n  /**\n* Group property to display, e.g. `'country.name'`.\n* **Note**: `items` should be an object array.\n* See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#grouptextfield).\n*\n* @default null\n* @memberof IonicSelectableComponent\n*/\n  @Input()\n  groupTextField: string = null;\n\n  /**\n   * Determines whether to show Searchbar.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#cansearch).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  canSearch = false;\n\n  /**\n   * Determines whether `onSearch` event is enabled.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#isonsearchenabled).\n   *\n   * @default true\n   * @memberof IonicSelectableComponent\n   */\n  @Input('isOnSearchEnabled')\n  get isOnSearchEnabled(): boolean {\n    return this._isOnSearchEnabled;\n  }\n  set isOnSearchEnabled(isOnSearchEnabled: boolean) {\n    this._isOnSearchEnabled = !!isOnSearchEnabled;\n  }\n\n  /**\n   * Determines whether to show Clear button.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#canclear).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @HostBinding('class.ionic-selectable-can-clear')\n  @Input('canClear')\n  get canClear(): boolean {\n    return this._canClear;\n  }\n  set canClear(canClear: boolean) {\n    this._canClear = !!canClear;\n    this._countFooterButtons();\n  }\n\n  /**\n   * Determines whether Ionic [InfiniteScroll](https://ionicframework.com/docs/api/components/infinite-scroll/InfiniteScroll/) is enabled.\n   * **Note**: Infinite scroll cannot be used together with virtual scroll.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#hasinfinitescroll).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  hasInfiniteScroll = false;\n\n  /**\n   * Determines whether Ionic [VirtualScroll](https://ionicframework.com/docs/api/components/virtual-scroll/VirtualScroll/) is enabled.\n   * **Note**: Virtual scroll cannot be used together with infinite scroll.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#hasvirtualscroll).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  hasVirtualScroll = false;\n\n  /**\n   * See Ionic VirtualScroll [approxItemHeight](https://ionicframework.com/docs/api/components/virtual-scroll/VirtualScroll/).\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#virtualscrollapproxitemheight).\n   *\n   * @default '40px'\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  virtualScrollApproxItemHeight = '40px';\n\n  /**\n   * A placeholder for Searchbar.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#searchplaceholder).\n   *\n   * @default 'Search'\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  searchPlaceholder = 'Search';\n\n  /**\n   * A placeholder.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#placeholder).\n   *\n   * @default null\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  placeholder: string = null;\n\n  /**\n   * Determines whether multiple items can be selected.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#ismultiple).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input('isMultiple')\n  get isMultiple(): boolean {\n    return this._isMultiple;\n  }\n  set isMultiple(isMultiple: boolean) {\n    this._isMultiple = !!isMultiple;\n    this._countFooterButtons();\n  }\n\n  /**\n   * Text to display when no items have been found during search.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#searchfailtext).\n   *\n   * @default 'No items found.'\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  searchFailText = 'No items found.';\n\n  /**\n   * Clear button text.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#clearbuttontext).\n   *\n   * @default 'Clear'\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  clearButtonText = 'Clear';\n\n  /**\n   * Add button text.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#addbuttontext).\n   *\n   * @default 'Add'\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  addButtonText = 'Add';\n\n  /**\n   * Confirm button text.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#confirmbuttontext).\n   *\n   * @default 'OK'\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  confirmButtonText = 'OK';\n\n  /**\n   * Close button text.\n   * The field is only applicable to **iOS** platform, on **Android** only Cross icon is displayed.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#closebuttontext).\n   *\n   * @default 'Cancel'\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  closeButtonText = 'Cancel';\n\n  /**\n   * Determines whether Searchbar should receive focus when Modal is opened.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#shouldfocussearchbar).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  shouldFocusSearchbar = false;\n\n  /**\n   * Header color. [Ionic colors](https://ionicframework.com/docs/theming/advanced#colors) are supported.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#headercolor).\n   *\n   * @default null\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  headerColor: string = null;\n\n  /**\n   * Group color. [Ionic colors](https://ionicframework.com/docs/theming/advanced#colors) are supported.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#groupcolor).\n   *\n   * @default null\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  groupColor: string = null;\n\n  /**\n   * Close button slot. [Ionic slots](https://ionicframework.com/docs/api/buttons) are supported.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#closebuttonslot).\n   *\n   * @default 'start'\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  closeButtonSlot = 'start';\n\n  /**\n   * Item icon slot. [Ionic slots](https://ionicframework.com/docs/api/item) are supported.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#itemiconslot).\n   *\n   * @default 'start'\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  itemIconSlot = 'start';\n\n  /**\n   * Fires when item/s has been selected and Modal closed.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onchange).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onChange: EventEmitter<{ component: IonicSelectableComponent, value: any }> = new EventEmitter();\n\n  /**\n   * Fires when the user is typing in Searchbar.\n   * **Note**: `canSearch` and `isOnSearchEnabled` has to be enabled.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onsearch).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onSearch: EventEmitter<{ component: IonicSelectableComponent, text: string }> = new EventEmitter();\n\n  /**\n   * Fires when no items have been found.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onsearchfail).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onSearchFail: EventEmitter<{ component: IonicSelectableComponent, text: string }> = new EventEmitter();\n\n  /**\n   * Fires when some items have been found.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onsearchsuccess).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onSearchSuccess: EventEmitter<{ component: IonicSelectableComponent, text: string }> = new EventEmitter();\n\n  /**\n   * Fires when the user has scrolled to the end of the list.\n   * **Note**: `hasInfiniteScroll` has to be enabled.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#oninfinitescroll).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onInfiniteScroll: EventEmitter<{ component: IonicSelectableComponent, text: string }> = new EventEmitter();\n\n  /**\n   * Fires when Modal has been opened.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onopen).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onOpen: EventEmitter<{ component: IonicSelectableComponent }> = new EventEmitter();\n\n  /**\n   * Fires when Modal has been closed.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onclose).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onClose: EventEmitter<{ component: IonicSelectableComponent }> = new EventEmitter();\n\n  /**\n   * Fires when an item has been selected or unselected.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onselect).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onSelect: EventEmitter<{ component: IonicSelectableComponent, item: any, isSelected: boolean }> = new EventEmitter();\n\n  /**\n   * Fires when Clear button has been clicked.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onclear).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onClear: EventEmitter<{ component: IonicSelectableComponent, items: any[] }> = new EventEmitter();\n\n  /**\n   * A list of items that are selected and awaiting confirmation by user, when he has clicked Confirm button.\n   * After the user has clicked Confirm button items to confirm are cleared.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#itemstoconfirm).\n   *\n   * @default []\n   * @readonly\n   * @memberof IonicSelectableComponent\n   */\n  get itemsToConfirm(): any[] {\n    return this._itemsToConfirm;\n  }\n\n  /**\n   * How long, in milliseconds, to wait to filter items or to trigger `onSearch` event after each keystroke.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#searchdebounce).\n   *\n   * @default 250\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  searchDebounce: Number = 250;\n\n  /**\n   * A list of items to disable.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#disableditems).\n   *\n   * @default []\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  disabledItems: any[] = [];\n\n  /**\n   * Determines whether item value only should be stored in `ngModel`, not the entire item.\n   * **Note**: Item value is defined by `itemValueField`.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#shouldstoreitemvalue).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  shouldStoreItemValue = false;\n\n  /**\n   * Determines whether to allow editing items.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#cansaveitem).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  canSaveItem = false;\n\n  /**\n   * Determines whether to allow deleting items.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#candeleteitem).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  canDeleteItem = false;\n\n  /**\n   * Determines whether to allow adding items.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#canadditem).\n   *\n   * @default false\n   * @memberof IonicSelectableComponent\n   */\n  @Input('canAddItem')\n  get canAddItem(): boolean {\n    return this._canAddItem;\n  }\n  set canAddItem(canAddItem: boolean) {\n    this._canAddItem = !!canAddItem;\n    this._countFooterButtons();\n  }\n\n  /**\n   * Fires when Edit item button has been clicked.\n   * When the button has been clicked `ionicSelectableAddItemTemplate` will be shown. Use the template to create a form to edit item.\n   * **Note**: `canSaveItem` has to be enabled.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onsaveitem).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onSaveItem: EventEmitter<{ component: IonicSelectableComponent, item: any }> = new EventEmitter();\n\n  /**\n   * Fires when Delete item button has been clicked.\n   * **Note**: `canDeleteItem` has to be enabled.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#ondeleteitem).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onDeleteItem: EventEmitter<{ component: IonicSelectableComponent, item: any }> = new EventEmitter();\n\n  /**\n   * Fires when Add item button has been clicked.\n   * When the button has been clicked `ionicSelectableAddItemTemplate` will be shown. Use the template to create a form to add item.\n   * **Note**: `canAddItem` has to be enabled.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#onadditem).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Output()\n  onAddItem: EventEmitter<{ component: IonicSelectableComponent }> = new EventEmitter();\n\n  @ContentChild(IonicSelectableValueTemplateDirective, { read: TemplateRef })\n  valueTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableItemTemplateDirective, { read: TemplateRef })\n  itemTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableItemEndTemplateDirective, { read: TemplateRef })\n  itemEndTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableTitleTemplateDirective, { read: TemplateRef })\n  titleTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectablePlaceholderTemplateDirective, { read: TemplateRef })\n  placeholderTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableMessageTemplateDirective, { read: TemplateRef })\n  messageTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableGroupTemplateDirective, { read: TemplateRef })\n  groupTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableGroupEndTemplateDirective, { read: TemplateRef })\n  groupEndTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableCloseButtonTemplateDirective, { read: TemplateRef })\n  closeButtonTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableSearchFailTemplateDirective, { read: TemplateRef })\n  searchFailTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableAddItemTemplateDirective, { read: TemplateRef })\n  addItemTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableFooterTemplateDirective, { read: TemplateRef })\n  footerTemplate: TemplateRef<any>;\n  _addItemTemplateFooterHeight: string;\n  @ContentChild(IonicSelectableHeaderTemplateDirective, { read: TemplateRef })\n  headerTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableItemIconTemplateDirective, { read: TemplateRef })\n  itemIconTemplate: TemplateRef<any>;\n  @ContentChild(IonicSelectableIconTemplateDirective, { read: TemplateRef })\n  iconTemplate: TemplateRef<any>;\n\n  /**\n   * See Ionic VirtualScroll [headerFn](https://ionicframework.com/docs/api/components/virtual-scroll/VirtualScroll/).\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#virtualscrollheaderfn).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  @Input()\n  virtualScrollHeaderFn = () => {\n    return null;\n  }\n\n  constructor(\n    private _modalController: ModalController,\n    private _platform: Platform,\n    @Optional() private ionItem: IonItem,\n    private _iterableDiffers: IterableDiffers,\n    private _element: ElementRef,\n    private _renderer: Renderer2\n  ) {\n    if (!this.items || !this.items.length) {\n      this.items = [];\n    }\n\n    this._itemsDiffer = this._iterableDiffers.find(this.items).create();\n  }\n\n  initFocus() { }\n\n  enableIonItem(isEnabled: boolean) {\n    if (!this.ionItem) {\n      return;\n    }\n\n    this.ionItem.disabled = !isEnabled;\n  }\n\n  _isNullOrWhiteSpace(value: any): boolean {\n    if (value === null || value === undefined) {\n      return true;\n    }\n\n    // Convert value to string in case if it's not.\n    return value.toString().replace(/\\s/g, '').length < 1;\n  }\n\n  _setHasSearchText() {\n    this._hasSearchText = !this._isNullOrWhiteSpace(this._searchText);\n  }\n\n  _hasOnSearch(): boolean {\n    return this.isOnSearchEnabled && this.onSearch.observers.length > 0;\n  }\n\n  _hasOnSaveItem(): boolean {\n    return this.canSaveItem && this.onSaveItem.observers.length > 0;\n  }\n\n  _hasOnAddItem(): boolean {\n    return this.canAddItem && this.onAddItem.observers.length > 0;\n  }\n\n  _hasOnDeleteItem(): boolean {\n    return this.canDeleteItem && this.onDeleteItem.observers.length > 0;\n  }\n\n  _emitValueChange() {\n    this.propagateOnChange(this.value);\n\n    this.onChange.emit({\n      component: this,\n      value: this.value\n    });\n  }\n\n  _emitSearch() {\n    if (!this.canSearch) {\n      return;\n    }\n\n    this.onSearch.emit({\n      component: this,\n      text: this._searchText\n    });\n  }\n\n  _emitOnSelect(item: any, isSelected: boolean) {\n    this.onSelect.emit({\n      component: this,\n      item: item,\n      isSelected: isSelected\n    });\n  }\n\n  _emitOnClear(items: any[]) {\n    this.onClear.emit({\n      component: this,\n      items: items\n    });\n  }\n\n  _emitOnSearchSuccessOrFail(isSuccess: boolean) {\n    const eventData = {\n      component: this,\n      text: this._searchText\n    };\n\n    if (isSuccess) {\n      this.onSearchSuccess.emit(eventData);\n    } else {\n      this.onSearchFail.emit(eventData);\n    }\n  }\n\n  _formatItem(item: any): string {\n    if (this._isNullOrWhiteSpace(item)) {\n      return null;\n    }\n\n    return this.itemTextField ? item[this.itemTextField] : item.toString();\n  }\n\n  _formatValueItem(item: any): string {\n    if (this._shouldStoreItemValue) {\n      // Get item text from the list as we store it's value only.\n      const selectedItem = this.items.find(_item => {\n        return _item[this.itemValueField] === item;\n      });\n\n      return this._formatItem(selectedItem);\n    } else {\n      return this._formatItem(item);\n    }\n  }\n\n  _getItemValue(item: any): any {\n    if (!this._hasObjects) {\n      return item;\n    }\n\n    return item[this.itemValueField];\n  }\n\n  _getStoredItemValue(item: any): any {\n    if (!this._hasObjects) {\n      return item;\n    }\n\n    return this._shouldStoreItemValue ? item : item[this.itemValueField];\n  }\n\n  _onSearchbarClear() {\n    // Ionic Searchbar doesn't clear bind with ngModel value.\n    // Do it ourselves.\n    this._searchText = '';\n  }\n\n  _filterItems() {\n    this._setHasSearchText();\n\n    if (this._hasOnSearch()) {\n      // Delegate filtering to the event.\n      this._emitSearch();\n    } else {\n      // Default filtering.\n      let groups = [];\n\n      if (!this._searchText || !this._searchText.trim()) {\n        groups = this._groups;\n      } else {\n        const filterText = this._searchText.trim().toLowerCase();\n\n        this._groups.forEach(group => {\n          const items = group.items.filter(item => {\n            const itemText = (this.itemTextField ?\n              item[this.itemTextField] : item).toString().toLowerCase();\n            return itemText.indexOf(filterText) !== -1;\n          });\n\n          if (items.length) {\n            groups.push({\n              value: group.value,\n              text: group.text,\n              items: items\n            });\n          }\n        });\n\n        // No items found.\n        if (!groups.length) {\n          groups.push({\n            items: []\n          });\n        }\n      }\n\n      this._filteredGroups = groups;\n      this._hasFilteredItems = !this._areGroupsEmpty(groups);\n      this._emitOnSearchSuccessOrFail(this._hasFilteredItems);\n    }\n  }\n\n  _isItemDisabled(item: any): boolean {\n    if (!this.disabledItems) {\n      return;\n    }\n\n    return this.disabledItems.some(_item => {\n      return this._getItemValue(_item) === this._getItemValue(item);\n    });\n  }\n\n  _isItemSelected(item: any) {\n    return this._selectedItems.find(selectedItem => {\n      return this._getItemValue(item) === this._getStoredItemValue(selectedItem);\n    }) !== undefined;\n  }\n\n  _addSelectedItem(item: any) {\n    if (this._shouldStoreItemValue) {\n      this._selectedItems.push(this._getItemValue(item));\n    } else {\n      this._selectedItems.push(item);\n    }\n  }\n\n  _deleteSelectedItem(item: any) {\n    let itemToDeleteIndex;\n\n    this._selectedItems.forEach((selectedItem, itemIndex) => {\n      if (\n        this._getItemValue(item) ===\n        this._getStoredItemValue(selectedItem)\n      ) {\n        itemToDeleteIndex = itemIndex;\n      }\n    });\n\n    this._selectedItems.splice(itemToDeleteIndex, 1);\n  }\n\n  _click() {\n    if (!this.isEnabled) {\n      return;\n    }\n\n    this._label = this._getLabelText();\n    this.open().then(() => {\n      this.onOpen.emit({\n        component: this\n      });\n    });\n  }\n\n  _saveItem(event: Event, item: any) {\n    event.stopPropagation();\n    this._itemToAdd = item;\n\n    if (this._hasOnSaveItem()) {\n      this.onSaveItem.emit({\n        component: this,\n        item: this._itemToAdd\n      });\n    } else {\n      this.showAddItemTemplate();\n    }\n  }\n\n  _deleteItemClick(event: Event, item: any) {\n    event.stopPropagation();\n    this._itemToAdd = item;\n\n    if (this._hasOnDeleteItem()) {\n      // Delegate logic to event.\n      this.onDeleteItem.emit({\n        component: this,\n        item: this._itemToAdd\n      });\n    } else {\n      this.deleteItem(this._itemToAdd);\n    }\n  }\n\n  _addItemClick() {\n    if (this._hasOnAddItem()) {\n      this.onAddItem.emit({\n        component: this\n      });\n    } else {\n      this.showAddItemTemplate();\n    }\n  }\n\n  _positionAddItemTemplate() {\n    // Wait for the template to render.\n    setTimeout(() => {\n      const footer = this._modalComponent._element.nativeElement\n        .querySelector('.ionic-selectable-add-item-template ion-footer');\n\n      this._addItemTemplateFooterHeight = footer ? `calc(100% - ${footer.offsetHeight}px)` : '100%';\n    }, 100);\n  }\n\n  _close() {\n    this.close().then(() => {\n      this.onClose.emit({\n        component: this\n      });\n    });\n\n    if (!this._hasOnSearch()) {\n      this._searchText = '';\n      this._setHasSearchText();\n    }\n  }\n\n  _clear() {\n    const selectedItems = this._selectedItems;\n\n    this.clear();\n    this._emitValueChange();\n    this._emitOnClear(selectedItems);\n    this.close().then(() => {\n      this.onClose.emit({\n        component: this\n      });\n    });\n  }\n\n  _getMoreItems() {\n    this.onInfiniteScroll.emit({\n      component: this,\n      text: this._searchText\n    });\n  }\n\n  _setItemsToConfirm(items: any[]) {\n    // Return a copy of original array, so it couldn't be changed from outside.\n    this._itemsToConfirm = [].concat(items);\n  }\n\n  _doSelect(selectedItem: any) {\n    this.value = selectedItem;\n    this._emitValueChange();\n  }\n\n  _select(item: any) {\n    const isItemSelected = this._isItemSelected(item);\n\n    if (this.isMultiple) {\n      if (isItemSelected) {\n        this._deleteSelectedItem(item);\n      } else {\n        this._addSelectedItem(item);\n      }\n\n      this._setItemsToConfirm(this._selectedItems);\n\n      // Emit onSelect event after setting items to confirm so they could be used\n      // inside the event.\n      this._emitOnSelect(item, !isItemSelected);\n    } else {\n      if (this.hasConfirmButton || this.footerTemplate) {\n        // Don't close Modal and keep track on items to confirm.\n        // When footer template is used it's up to developer to close Modal.\n        this._selectedItems = [];\n\n        if (isItemSelected) {\n          this._deleteSelectedItem(item);\n        } else {\n          this._addSelectedItem(item);\n        }\n\n        this._setItemsToConfirm(this._selectedItems);\n\n        // Emit onSelect event after setting items to confirm so they could be used\n        // inside the event.\n        this._emitOnSelect(item, !isItemSelected);\n      } else {\n        if (!isItemSelected) {\n          this._selectedItems = [];\n          this._addSelectedItem(item);\n\n          // Emit onSelect before onChange.\n          this._emitOnSelect(item, true);\n\n          if (this._shouldStoreItemValue) {\n            this._doSelect(this._getItemValue(item));\n          } else {\n            this._doSelect(item);\n          }\n        }\n\n        this._close();\n      }\n    }\n  }\n\n  _confirm() {\n    this.confirm();\n    this._close();\n  }\n\n  private _getLabelText(): string {\n    return this._ionLabelElement ? this._ionLabelElement.textContent : null;\n  }\n\n  private _areGroupsEmpty(groups) {\n    return groups.length === 0 || groups.every(group => {\n      return !group.items || group.items.length === 0;\n    });\n  }\n\n  private _countFooterButtons() {\n    let footerButtonsCount = 0;\n\n    if (this.canClear) {\n      footerButtonsCount++;\n    }\n\n    if (this.isMultiple || this._hasConfirmButton) {\n      footerButtonsCount++;\n    }\n\n    if (this.canAddItem) {\n      footerButtonsCount++;\n    }\n\n    this._footerButtonsCount = footerButtonsCount;\n  }\n\n  private _setItems(items: any[]) {\n    // It's important to have an empty starting group with empty items (groups[0].items),\n    // because we bind to it when using VirtualScroll.\n    // See https://github.com/eakoriakin/ionic-selectable/issues/70.\n    let groups: any[] = [{\n      items: items || []\n    }];\n\n    if (items && items.length) {\n      if (this._hasGroups) {\n        groups = [];\n\n        items.forEach(item => {\n          const groupValue = this._getPropertyValue(item, this.groupValueField),\n            group = groups.find(_group => _group.value === groupValue);\n\n          if (group) {\n            group.items.push(item);\n          } else {\n            groups.push({\n              value: groupValue,\n              text: this._getPropertyValue(item, this.groupTextField),\n              items: [item]\n            });\n          }\n        });\n      }\n    }\n\n    this._groups = groups;\n    this._filteredGroups = this._groups;\n    this._hasFilteredItems = !this._areGroupsEmpty(this._filteredGroups);\n  }\n\n  private _getPropertyValue(object: any, property: string): any {\n    if (!property) {\n      return null;\n    }\n\n    return property.split('.').reduce((_object, _property) => {\n      return _object ? _object[_property] : null;\n    }, object);\n  }\n\n  private _setIonItemHasFocus(hasFocus: boolean) {\n    if (!this.ionItem) {\n      return;\n    }\n\n    // Apply focus CSS class for proper stylying of ion-item/ion-label.\n    this._setIonItemCssClass('item-has-focus', hasFocus);\n  }\n\n  private _setIonItemHasValue() {\n    if (!this.ionItem) {\n      return;\n    }\n\n    // Apply value CSS class for proper stylying of ion-item/ion-label.\n    this._setIonItemCssClass('item-has-value', this.hasValue());\n  }\n\n  private _setHasPlaceholder() {\n    this._hasPlaceholder = !this.hasValue() &&\n      (!this._isNullOrWhiteSpace(this.placeholder) || this.placeholderTemplate) ?\n      true : false;\n  }\n\n  private propagateOnChange = (_: any) => { };\n  private propagateOnTouched = () => { };\n\n  private _setIonItemCssClass(cssClass: string, shouldAdd: boolean) {\n    if (!this._ionItemElement) {\n      return;\n    }\n\n    // Change to Renderer2\n    if (shouldAdd) {\n      this._renderer.addClass(this._ionItemElement, cssClass);\n    } else {\n      this._renderer.removeClass(this._ionItemElement, cssClass);\n    }\n  }\n\n  private _toggleAddItemTemplate(isVisible: boolean) {\n    // It should be possible to show/hide the template regardless\n    // canAddItem or canSaveItem parameters, so we could implement some\n    // custom behavior. E.g. adding item when search fails using onSearchFail event.\n    if (!this.addItemTemplate) {\n      return;\n    }\n\n    // To make SaveItemTemplate visible we just position it over list using CSS.\n    // We don't hide list with *ngIf or [hidden] to prevent its scroll position.\n    this._isAddItemTemplateVisible = isVisible;\n    this._isFooterVisible = !isVisible;\n  }\n\n  /* ControlValueAccessor */\n  writeValue(value: any) {\n    this.value = value;\n  }\n\n  registerOnChange(method: any): void {\n    this.propagateOnChange = method;\n  }\n\n  registerOnTouched(method: () => void) {\n    this.propagateOnTouched = method;\n  }\n\n  setDisabledState(isDisabled: boolean) {\n    this.isEnabled = !isDisabled;\n  }\n  /* .ControlValueAccessor */\n\n  ngOnInit() {\n    this._isIos = this._platform.is('ios');\n    this._isMD = !this._isIos;\n    this._hasObjects = !this._isNullOrWhiteSpace(this.itemValueField);\n    // Grouping is supported for objects only.\n    // Ionic VirtualScroll has it's own implementation of grouping.\n    this._hasGroups = Boolean(this._hasObjects && this.groupValueField && !this.hasVirtualScroll);\n\n    if (this.ionItem) {\n      this._ionItemElement = this._element.nativeElement.closest('ion-item');\n      this._setIonItemCssClass('item-interactive', true);\n      this._setIonItemCssClass('item-ionic-selectable', true);\n\n      if (this._ionItemElement) {\n        this._ionLabelElement = this._ionItemElement.querySelector('ion-label');\n\n        if (this._ionLabelElement) {\n          this._hasIonLabel = true;\n          this._ionLabelPosition = this._ionLabelElement.getAttribute('position') || 'default';\n        }\n      }\n    }\n\n    this.enableIonItem(this.isEnabled);\n  }\n\n  ngDoCheck() {\n    const itemsChanges = this._itemsDiffer.diff(this.items);\n\n    if (itemsChanges) {\n      this._setItems(this.items);\n      this.value = this.value;\n\n      this.onItemsChange.emit({\n        component: this\n      });\n    }\n  }\n\n  /**\n   * Adds item.\n   * **Note**: If you want an item to be added to the original array as well use two-way data binding syntax on `[(items)]` field.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#additem).\n   *\n   * @param item Item to add.\n   * @returns Promise that resolves when item has been added.\n   * @memberof IonicSelectableComponent\n   */\n  addItem(item: any): Promise<any> {\n    const self = this;\n\n    // Adding item triggers onItemsChange.\n    // Return a promise that resolves when onItemsChange finishes.\n    // We need a promise or user could do something after item has been added,\n    // e.g. use search() method to find the added item.\n    this.items.unshift(item);\n\n    // Close any running subscription.\n    if (this._addItemObservable) {\n      this._addItemObservable.unsubscribe();\n    }\n\n    return new Promise(function (resolve, reject) {\n      // Complete callback isn't fired for some reason,\n      // so unsubscribe in both success and fail cases.\n      self._addItemObservable = self.onItemsChange.asObservable().subscribe(() => {\n        self._addItemObservable.unsubscribe();\n        resolve();\n      }, () => {\n        self._addItemObservable.unsubscribe();\n        reject();\n      });\n    });\n  }\n\n  /**\n * Deletes item.\n * **Note**: If you want an item to be deleted from the original array as well use two-way data binding syntax on `[(items)]` field.\n * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#deleteitem).\n *\n * @param item Item to delete.\n * @returns Promise that resolves when item has been deleted.\n * @memberof IonicSelectableComponent\n */\n  deleteItem(item: any): Promise<any> {\n    const self = this;\n    let hasValueChanged = false;\n\n    // Remove deleted item from selected items.\n    if (this._selectedItems) {\n      this._selectedItems = this._selectedItems.filter(_item => {\n        return this._getItemValue(item) !== this._getStoredItemValue(_item);\n      });\n    }\n\n    // Remove deleted item from value.\n    if (this.value) {\n      if (this.isMultiple) {\n        const values = this.value.filter(value => {\n          return value.id !== item.id;\n        });\n\n        if (values.length !== this.value.length) {\n          this.value = values;\n          hasValueChanged = true;\n        }\n      } else {\n        if (item === this.value) {\n          this.value = null;\n          hasValueChanged = true;\n        }\n      }\n    }\n\n    if (hasValueChanged) {\n      this._emitValueChange();\n    }\n\n    // Remove deleted item from list.\n    const items = this.items.filter(_item => {\n      return _item.id !== item.id;\n    });\n\n    // Refresh items on parent component.\n    this.itemsChange.emit(items);\n\n    // Refresh list.\n    this._setItems(items);\n\n    this.onItemsChange.emit({\n      component: this\n    });\n\n    // Close any running subscription.\n    if (this._deleteItemObservable) {\n      this._deleteItemObservable.unsubscribe();\n    }\n\n    return new Promise(function (resolve, reject) {\n      // Complete callback isn't fired for some reason,\n      // so unsubscribe in both success and fail cases.\n      self._deleteItemObservable = self.onItemsChange.asObservable().subscribe(() => {\n        self._deleteItemObservable.unsubscribe();\n        resolve();\n      }, () => {\n        self._deleteItemObservable.unsubscribe();\n        reject();\n      });\n    });\n  }\n\n  /**\n   * Determines whether any item has been selected.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#hasvalue).\n   *\n   * @returns A boolean determining whether any item has been selected.\n   * @memberof IonicSelectableComponent\n   */\n  hasValue(): boolean {\n    if (this.isMultiple) {\n      return this._valueItems.length !== 0;\n    } else {\n      return this._valueItems.length !== 0 && !this._isNullOrWhiteSpace(this._valueItems[0]);\n    }\n  }\n\n  /**\n   * Opens Modal.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#open).\n   *\n   * @returns Promise that resolves when Modal has been opened.\n   * @memberof IonicSelectableComponent\n   */\n  open(): Promise<void> {\n    const self = this;\n\n    return new Promise(function (resolve, reject) {\n      if (!self._isEnabled || self._isOpened) {\n        reject('IonicSelectable is disabled or already opened.');\n        return;\n      }\n\n      self._filterItems();\n      self._isOpened = true;\n\n      const modalOptions: ModalOptions = {\n        component: IonicSelectableModalComponent,\n        componentProps: { selectComponent: self },\n        backdropDismiss: self._shouldBackdropClose\n      };\n\n      if (self.modalCssClass) {\n        modalOptions.cssClass = self.modalCssClass;\n      }\n\n      if (self.modalEnterAnimation) {\n        modalOptions.enterAnimation = self.modalEnterAnimation;\n      }\n\n      if (self.modalLeaveAnimation) {\n        modalOptions.leaveAnimation = self.modalLeaveAnimation;\n      }\n\n      self._modalController.create(modalOptions).then(modal => {\n        self._modal = modal;\n        modal.present().then(() => {\n          // Set focus after Modal has opened to avoid flickering of focus highlighting\n          // before Modal opening.\n          self._setIonItemHasFocus(true);\n          resolve();\n        });\n\n        modal.onWillDismiss().then(() => {\n          self._setIonItemHasFocus(false);\n        });\n\n        modal.onDidDismiss().then(event => {\n          self._isOpened = false;\n          self._itemsToConfirm = [];\n\n          // Closed by clicking on backdrop outside modal.\n          if (event.role === 'backdrop') {\n            self.onClose.emit({\n              component: self\n            });\n          }\n        });\n      });\n    });\n  }\n\n  /**\n   * Closes Modal.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#close).\n   *\n   * @returns Promise that resolves when Modal has been closed.\n   * @memberof IonicSelectableComponent\n   */\n  close(): Promise<void> {\n    const self = this;\n\n    return new Promise(function (resolve, reject) {\n      if (!self._isEnabled || !self._isOpened) {\n        reject('IonicSelectable is disabled or already closed.');\n        return;\n      }\n\n      self.propagateOnTouched();\n      self._isOpened = false;\n      self._itemToAdd = null;\n      self._modal.dismiss().then(() => {\n        self._setIonItemHasFocus(false);\n        self.hideAddItemTemplate();\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * Clears value.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#clear).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  clear() {\n    this.value = this.isMultiple ? [] : null;\n    this._itemsToConfirm = [];\n    this.propagateOnChange(this.value);\n  }\n\n  /**\n   * Confirms selected items by updating value.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#confirm).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  confirm() {\n    if (this.isMultiple) {\n      this._doSelect(this._selectedItems);\n    } else if (this.hasConfirmButton || this.footerTemplate) {\n      this._doSelect(this._selectedItems[0] || null);\n    }\n  }\n\n  /**\n   * Selects or deselects all or specific items.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#toggleitems).\n   *\n   * @param isSelect Determines whether to select or deselect items.\n   * @param [items] Items to toggle. If items are not set all items will be toggled.\n   * @memberof IonicSelectableComponent\n   */\n  toggleItems(isSelect: boolean, items?: any[]) {\n    if (isSelect) {\n      const hasItems = items && items.length;\n      let itemsToToggle = this._groups.reduce((allItems, group) => {\n        return allItems.concat(group.items);\n      }, []);\n\n      // Don't allow to select all items in single mode.\n      if (!this.isMultiple && !hasItems) {\n        itemsToToggle = [];\n      }\n\n      // Toggle specific items.\n      if (hasItems) {\n        itemsToToggle = itemsToToggle.filter(itemToToggle => {\n          return items.find(item => {\n            return this._getItemValue(itemToToggle) === this._getItemValue(item);\n          }) !== undefined;\n        });\n\n        // Take the first item for single mode.\n        if (!this.isMultiple) {\n          itemsToToggle.splice(0, 1);\n        }\n      }\n\n      itemsToToggle.forEach(item => {\n        this._addSelectedItem(item);\n      });\n    } else {\n      this._selectedItems = [];\n    }\n\n    this._setItemsToConfirm(this._selectedItems);\n  }\n\n  /**\n   * Scrolls to the top of Modal content.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#scrolltotop).\n   *\n   * @returns Promise that resolves when scroll has been completed.\n   * @memberof IonicSelectableComponent\n   */\n  scrollToTop(): Promise<any> {\n    const self = this;\n\n    return new Promise(function (resolve, reject) {\n      if (!self._isOpened) {\n        reject('IonicSelectable content cannot be scrolled.');\n        return;\n      }\n\n      self._modalComponent._content.scrollToTop().then(() => {\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * Scrolls to the bottom of Modal content.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#scrolltobottom).\n   *\n   * @returns Promise that resolves when scroll has been completed.\n   * @memberof IonicSelectableComponent\n   */\n  scrollToBottom(): Promise<any> {\n    const self = this;\n\n    return new Promise(function (resolve, reject) {\n      if (!self._isOpened) {\n        reject('IonicSelectable content cannot be scrolled.');\n        return;\n      }\n\n      self._modalComponent._content.scrollToBottom().then(() => {\n        resolve();\n      });\n    });\n  }\n\n  /**\n   * Starts search process by showing Loading spinner.\n   * Use it together with `onSearch` event to indicate search start.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#startsearch).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  startSearch() {\n    if (!this._isEnabled) {\n      return;\n    }\n\n    this.showLoading();\n  }\n\n  /**\n   * Ends search process by hiding Loading spinner and refreshing items.\n   * Use it together with `onSearch` event to indicate search end.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#endsearch).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  endSearch() {\n    if (!this._isEnabled) {\n      return;\n    }\n\n    this.hideLoading();\n\n    // When inside Ionic Modal and onSearch event is used,\n    // ngDoCheck() doesn't work as _itemsDiffer fails to detect changes.\n    // See https://github.com/eakoriakin/ionic-selectable/issues/44.\n    // Refresh items manually.\n    this._setItems(this.items);\n    this._emitOnSearchSuccessOrFail(this._hasFilteredItems);\n  }\n\n  /**\n   * Enables infinite scroll.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#enableinfinitescroll).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  enableInfiniteScroll() {\n    if (!this._hasInfiniteScroll) {\n      return;\n    }\n\n    this._modalComponent._infiniteScroll.disabled = false;\n  }\n\n  /**\n   * Disables infinite scroll.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#disableinfinitescroll).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  disableInfiniteScroll() {\n    if (!this._hasInfiniteScroll) {\n      return;\n    }\n\n    this._modalComponent._infiniteScroll.disabled = true;\n  }\n\n  /**\n   * Ends infinite scroll.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#endinfinitescroll).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  endInfiniteScroll() {\n    if (!this._hasInfiniteScroll) {\n      return;\n    }\n\n    this._modalComponent._infiniteScroll.complete();\n    this._setItems(this.items);\n  }\n\n  /**\n   * Triggers search of items.\n   * **Note**: `canSearch` has to be enabled.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#search).\n   *\n   * @param text Text to search items by.\n   * @memberof IonicSelectableComponent\n   */\n  search(text: string) {\n    if (!this._isEnabled || !this._isOpened || !this.canSearch) {\n      return;\n    }\n\n    this._searchText = text;\n    this._setHasSearchText();\n    this._filterItems();\n  }\n\n  /**\n   * Shows Loading spinner.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#showloading).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  showLoading() {\n    if (!this._isEnabled) {\n      return;\n    }\n\n    this._isSearching = true;\n  }\n\n  /**\n   * Hides Loading spinner.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#hideloading).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  hideLoading() {\n    if (!this._isEnabled) {\n      return;\n    }\n\n    this._isSearching = false;\n  }\n\n  /**\n   * Shows `ionicSelectableAddItemTemplate`.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#showadditemtemplate).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  showAddItemTemplate() {\n    this._toggleAddItemTemplate(true);\n\n    // Position the template only when it shous up.\n    this._positionAddItemTemplate();\n  }\n\n  /**\n   * Hides `ionicSelectableAddItemTemplate`.\n   * See more on [GitHub](https://github.com/eakoriakin/ionic-selectable/wiki/Documentation#hideadditemtemplate).\n   *\n   * @memberof IonicSelectableComponent\n   */\n  hideAddItemTemplate() {\n    // Clean item to add as it's no longer needed once Add Item Modal has been closed.\n    this._itemToAdd = null;\n    this._toggleAddItemTemplate(false);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { IonicSelectableAddItemTemplateDirective } from './ionic-selectable-add-item-template.directive';\nimport { IonicSelectableCloseButtonTemplateDirective } from './ionic-selectable-close-button-template.directive';\nimport { IonicSelectableFooterTemplateDirective } from './ionic-selectable-footer-template.directive';\nimport { IonicSelectableGroupEndTemplateDirective } from './ionic-selectable-group-end-template.directive';\nimport { IonicSelectableGroupTemplateDirective } from './ionic-selectable-group-template.directive';\nimport { IonicSelectableHeaderTemplateDirective } from './ionic-selectable-header-template.directive';\nimport { IonicSelectableItemEndTemplateDirective } from './ionic-selectable-item-end-template.directive';\nimport { IonicSelectableItemIconTemplateDirective } from './ionic-selectable-item-icon-template.directive';\nimport { IonicSelectableItemTemplateDirective } from './ionic-selectable-item-template.directive';\nimport { IonicSelectableMessageTemplateDirective } from './ionic-selectable-message-template.directive';\nimport { IonicSelectableModalComponent } from './ionic-selectable-modal.component';\nimport { IonicSelectablePlaceholderTemplateDirective } from './ionic-selectable-placeholder-template.directive';\nimport { IonicSelectableSearchFailTemplateDirective } from './ionic-selectable-search-fail-template.directive';\nimport { IonicSelectableTitleTemplateDirective } from './ionic-selectable-title-template.directive';\nimport { IonicSelectableValueTemplateDirective } from './ionic-selectable-value-template.directive';\nimport { IonicSelectableIconTemplateDirective } from './ionic-selectable-icon-template.directive';\nimport { IonicSelectableComponent } from './ionic-selectable.component';\nexport { IonicSelectableAddItemTemplateDirective } from './ionic-selectable-add-item-template.directive';\nexport { IonicSelectableCloseButtonTemplateDirective } from './ionic-selectable-close-button-template.directive';\nexport { IonicSelectableFooterTemplateDirective } from './ionic-selectable-footer-template.directive';\nexport { IonicSelectableGroupEndTemplateDirective } from './ionic-selectable-group-end-template.directive';\nexport { IonicSelectableGroupTemplateDirective } from './ionic-selectable-group-template.directive';\nexport { IonicSelectableHeaderTemplateDirective } from './ionic-selectable-header-template.directive';\nexport { IonicSelectableItemEndTemplateDirective } from './ionic-selectable-item-end-template.directive';\nexport { IonicSelectableItemIconTemplateDirective } from './ionic-selectable-item-icon-template.directive';\nexport { IonicSelectableItemTemplateDirective } from './ionic-selectable-item-template.directive';\nexport { IonicSelectableMessageTemplateDirective } from './ionic-selectable-message-template.directive';\nexport { IonicSelectableModalComponent } from './ionic-selectable-modal.component';\nexport { IonicSelectablePlaceholderTemplateDirective } from './ionic-selectable-placeholder-template.directive';\nexport { IonicSelectableSearchFailTemplateDirective } from './ionic-selectable-search-fail-template.directive';\nexport { IonicSelectableTitleTemplateDirective } from './ionic-selectable-title-template.directive';\nexport { IonicSelectableValueTemplateDirective } from './ionic-selectable-value-template.directive';\nexport { IonicSelectableIconTemplateDirective } from './ionic-selectable-icon-template.directive';\nexport { IonicSelectableComponent } from './ionic-selectable.component';\n\nconst components = [IonicSelectableComponent, IonicSelectableModalComponent],\n  directives = [\n    IonicSelectableValueTemplateDirective,\n    IonicSelectableItemTemplateDirective,\n    IonicSelectableItemEndTemplateDirective,\n    IonicSelectableTitleTemplateDirective,\n    IonicSelectablePlaceholderTemplateDirective,\n    IonicSelectableMessageTemplateDirective,\n    IonicSelectableGroupTemplateDirective,\n    IonicSelectableGroupEndTemplateDirective,\n    IonicSelectableCloseButtonTemplateDirective,\n    IonicSelectableSearchFailTemplateDirective,\n    IonicSelectableAddItemTemplateDirective,\n    IonicSelectableFooterTemplateDirective,\n    IonicSelectableHeaderTemplateDirective,\n    IonicSelectableItemIconTemplateDirective,\n    IonicSelectableIconTemplateDirective\n  ];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule\n  ],\n  declarations: [\n    ...components,\n    ...directives\n  ],\n  exports: [\n    ...components,\n    ...directives\n  ],\n  entryComponents: components\n})\nexport class IonicSelectableModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}